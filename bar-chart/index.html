<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <style>
        .chart rect {
            fill: blue;
        }

        .chart text {
            fill: white;
            font: 10px sans-serif;
            text-anchor: end;
        }

        .month{
          fill: white;
          float: left;
        }
    </style>
    <script>
        function draw(data) {
            var width = 520,
                barHeight = 30;

            var x = d3.scale.linear()
                .range([0, width]);

            var chart = d3.select(".chart")
                .attr("width", width);

            x.domain([0, d3.max(data, function(d) {
                return d.turnover;
            })]);

            chart.attr("height", barHeight * data.length);

            var bar = chart.selectAll("g")
                .data(data)
                .enter().append("g")
                .attr("transform", function(d, i) {
                    return "translate(0," + i * barHeight + ")";
                });

            bar.append("rect")
                .attr("width", function(d) {
                    return x(parseInt(d.turnover));
                })
                .attr("height", barHeight - 1);

            bar.append("text")
                .attr("x", function(d) {
                    return x(d.turnover) - 3;
                })
                .attr("y", barHeight / 2)
                .attr("dy", ".35em")
                .text(function(d) {
                    return d.turnover;
                });

            bar.append("text")
                .attr("x", function(d) {
                    return 50;
                })
                .attr("y", barHeight / 2)
                .attr("dy", ".35em")
                .text(function(d) {
                    return d.month;
                })
                .attr("class", "month");
        }
    </script>
</head>

<body>
    <svg class="chart"></svg>
    <script type="text/javascript">
        function type(d) {
            d.turnover = +d.turnover; // coerce to number
            return d;
        }

        d3.tsv("data.tsv", type, draw);
    </script>
</body>

</html>
